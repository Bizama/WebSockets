(function(t){function e(e){for(var c,l,r=e[0],a=e[1],s=e[2],u=0,b=[];u<r.length;u++)l=r[u],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&b.push(o[l][0]),o[l]=0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(t[c]=a[c]);f&&f(e);while(b.length)b.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],c=!0,l=1;l<n.length;l++){var a=n[l];0!==o[a]&&(c=!1)}c&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var c={},o={app:0},i=[];function l(t){return r.p+"js/"+({}[t]||t)+"."+{"chunk-2d0c9189":"c81458cc","chunk-2d0cf391":"020c75ea","chunk-2d0da8f3":"c8c3e7e8","chunk-2d22523a":"4b710d99"}[t]+".js"}function r(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var c=new Promise((function(e,c){n=o[t]=[e,c]}));e.push(n[2]=c);var i,a=document.createElement("script");a.charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.src=l(t);var s=new Error;i=function(e){a.onerror=a.onload=null,clearTimeout(u);var n=o[t];if(0!==n){if(n){var c=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;s.message="Loading chunk "+t+" failed.\n("+c+": "+i+")",s.name="ChunkLoadError",s.type=c,s.request=i,n[1](s)}o[t]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:a})}),12e4);a.onerror=a.onload=i,document.head.appendChild(a)}return Promise.all(e)},r.m=t,r.c=c,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)r.d(n,c,function(e){return t[e]}.bind(null,c));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/WebSockets/",r.oe=function(t){throw console.error(t),t};var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var f=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},2341:function(t,e,n){"use strict";n("aec9")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),o={id:"app"};function i(t,e,n,i,l,r){var a=Object(c["s"])("HelloWorld");return Object(c["m"])(),Object(c["d"])("div",o,[Object(c["f"])(a)])}n("b0c0");var l=Object(c["f"])("h1",null,"Websocket Airlines Information",-1),r={ref:"chatbox",class:"chatbox-container",id:"chatbox"},a=Object(c["f"])("input",{type:"submit",value:"Send"},null,-1),s=Object(c["f"])("span",null,"Introduzca un nickname para chatear",-1),u=Object(c["f"])("br",null,null,-1),f=Object(c["f"])("input",{type:"submit",value:"Ingresar"},null,-1),b={class:"mapbox-container"},p={style:{"margin-top":"32px"}},d={class:"flights-info"};function O(t,e,n,o,i,O){var j=Object(c["s"])("LTileLayer"),m=Object(c["s"])("l-marker"),h=Object(c["s"])("l-tooltip"),g=Object(c["s"])("l-control-layers"),v=Object(c["s"])("LPolyline"),k=Object(c["s"])("l-map"),y=Object(c["s"])("flights-info");return Object(c["m"])(),Object(c["d"])("div",null,[l,Object(c["f"])("div",null,[Object(c["f"])("ul",r,[(Object(c["m"])(!0),Object(c["d"])(c["a"],null,Object(c["r"])(i.messages,(function(t){return Object(c["m"])(),Object(c["d"])("li",{key:t.name,class:"list"},Object(c["t"])(t.name)+"("+Object(c["t"])(t.date)+"): "+Object(c["t"])(t.message),1)})),128))],512),""!=this.nickname?(Object(c["m"])(),Object(c["d"])("form",{key:0,onSubmit:e[2]||(e[2]=Object(c["y"])((function(){return O.sendMessage&&O.sendMessage.apply(O,arguments)}),["prevent"])),class:"chatbox-bottom"},[Object(c["x"])(Object(c["f"])("input",{class:"chatbox-input",type:"text",placeholder:"Message...","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.message=t})},null,512),[[c["u"],i.message]]),a],32)):(Object(c["m"])(),Object(c["d"])("form",{key:1,onSubmit:e[4]||(e[4]=Object(c["y"])((function(){return O.changeNickname&&O.changeNickname.apply(O,arguments)}),["prevent"]))},[s,u,Object(c["x"])(Object(c["f"])("input",{type:"text",class:"chatbox-input",placeholder:"Escriba su nickname...","onUpdate:modelValue":e[3]||(e[3]=function(e){return t.nickname_aux=e})},null,512),[[c["u"],t.nickname_aux]]),f],32))]),Object(c["f"])("div",b,[Object(c["f"])(k,{"min-zoom":4,modelValue:t.zoom,"onUpdate:modelValue":e[5]||(e[5]=function(e){return t.zoom=e}),zoom:t.zoom,"onUpdate:zoom":e[6]||(e[6]=function(e){return t.zoom=e}),center:[-33.8,-70.803203],ref:"myMap"},{default:Object(c["w"])((function(){return[Object(c["f"])(j,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(Object(c["m"])(!0),Object(c["d"])(c["a"],null,Object(c["r"])(O.airports,(function(t,e){return Object(c["m"])(),Object(c["d"])(m,{key:"ai-".concat(e),"lat-lng":t},null,8,["lat-lng"])})),128)),(Object(c["m"])(!0),Object(c["d"])(c["a"],null,Object(c["r"])(i.planes,(function(t,e){return Object(c["m"])(),Object(c["d"])(m,{key:"pls-".concat(e),"lat-lng":t.position},{default:Object(c["w"])((function(){return[Object(c["f"])(h,{options:{offset:[12,24]}},{default:Object(c["w"])((function(){return[Object(c["e"])(Object(c["t"])(t.code),1)]})),_:2},1024)]})),_:2},1032,["lat-lng"])})),128)),Object(c["f"])(g),(Object(c["m"])(!0),Object(c["d"])(c["a"],null,Object(c["r"])(O.theoricalPath,(function(t,e){return Object(c["m"])(),Object(c["d"])(v,{key:"p-".concat(e),"lat-lngs":t.latlngs,color:t.color},null,8,["lat-lngs","color"])})),128)),(Object(c["m"])(!0),Object(c["d"])(c["a"],null,Object(c["r"])(O.actualPath,(function(t,e){return Object(c["m"])(),Object(c["d"])(v,{key:"l-".concat(e),"lat-lngs":t.latlngs,color:t.color},null,8,["lat-lngs","color"])})),128))]})),_:1},8,["modelValue","zoom","center"])]),Object(c["f"])("div",p,[Object(c["f"])("button",{onClick:e[7]||(e[7]=function(){return O.getFlights&&O.getFlights.apply(O,arguments)})},"Obtener informacion de vuelos"),Object(c["f"])("div",d,[(Object(c["m"])(!0),Object(c["d"])(c["a"],null,Object(c["r"])(i.flights[0],(function(t){return Object(c["m"])(),Object(c["d"])("li",{key:t.code},[Object(c["f"])(y,{flight_list:t},null,8,["flight_list"])])})),128))])])])}var j=n("2909"),m=(n("d81d"),n("0d03"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("0481"),n("8e27")),h=n.n(m),g={class:"information-box"},v=Object(c["f"])("span",null,"Pasajeros: ",-1),k=Object(c["f"])("br",null,null,-1);function y(t,e,n,o,i,l){return Object(c["m"])(),Object(c["d"])("div",g,[Object(c["f"])("div",null,[Object(c["f"])("span",null,Object(c["t"])(n.flight_list["code"]),1)]),Object(c["f"])("div",null,[Object(c["f"])("span",null,Object(c["t"])(n.flight_list["airline"]),1)]),Object(c["f"])("div",null,[Object(c["f"])("span",null,Object(c["t"])(n.flight_list["plane"]),1)]),Object(c["f"])("div",null,[v,(Object(c["m"])(!0),Object(c["d"])(c["a"],null,Object(c["r"])(n.flight_list["passengers"],(function(t){return Object(c["m"])(),Object(c["d"])("li",{key:t},[Object(c["f"])("ul",null,Object(c["t"])(t.name)+" - "+Object(c["t"])(t.age),1)])})),128))]),Object(c["f"])("div",null,[Object(c["f"])("span",null,"Origen: "+Object(c["t"])(n.flight_list["origin"]),1),k,Object(c["f"])("span",null,"Destino: "+Object(c["t"])(n.flight_list["destination"]),1)])])}var _={props:{flight_list:Object},data:function(){return{hello_world:"Hello World"}}};n("cc5f");_.render=y;var x=_,w=(n("6cc5"),n("5afd")),L=n("e11e"),P=n.n(L),S={components:{LMap:w["b"],LTileLayer:w["e"],LMarker:w["c"],LPolyline:w["d"],LTooltip:w["f"],FlightsInfo:x,LControlLayers:w["a"]},name:"HelloWorld",data:function(){return{socket:{},message:"",messages:[],nickname:"",flights:[],planes:[]}},created:function(){var t=this;this.socket=h()("ws://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),this.socket.emit("FLIGHTS"),this.socket.once("FLIGHTS",(function(e){t.flights.push(e),t.planes=t.flights[0].map((function(t){return{code:t.code,position:Object(j["a"])(t.origin),initial_position:Object(j["a"])(t.origin),destination:Object(j["a"])(t.destination),icon:P.a.icon({iconUrl:"../src/assets/logo.png",iconSize:[64,64],iconAnchor:[32,32]})}}))}))},mounted:function(){var t=this;this.socket.on("POSITION",(function(e){t.planes=t.planes.map((function(t){return e.code===t.code&&(t.position=e.position,0==t.initial_position[0]&&(t.initial_position=t.position)),t}))})),this.socket.on("CHAT",(function(e){var n=new Date(e.date);e.date=n,t.messages.push(e),t.$nextTick((function(){var t=this.$refs["chatbox"];t.scrollTop=t.scrollHeight}))})),this.socket.once("FLIGHTS",(function(e){t.flights.push(e),t.planes=t.flights[0].map((function(t){return{code:t.code,position:Object(j["a"])(t.origin),initial_position:[0,0],destination:Object(j["a"])(t.destination),icon:P.a.icon({iconUrl:"../src/assets/logo.png",iconSize:[64,64],iconAnchor:[32,32]})}})),console.log(t.planes)}))},methods:{sendMessage:function(){this.socket.emit("CHAT",{name:this.nickname,message:this.message}),this.message=""},checkNickname:function(){if(""==this.nickname)return!1},getFlights:function(){this.socket.emit("FLIGHTS")},changeNickname:function(){this.nickname=this.nickname_aux}},computed:{airports:function(){return new Set(this.flights[0].map((function(t){var e=Object(j["a"])(t.origin),n=Object(j["a"])(t.destination);return[e,n]})).flat())},theoricalPath:function(){return this.flights[0].map((function(t){return{latlngs:[Object(j["a"])(t.origin),Object(j["a"])(t.destination)],color:"#14B8A6"}}))},actualPath:function(){return this.planes.map((function(t){return{latlngs:[Object(j["a"])(t.initial_position),Object(j["a"])(t.position)],color:"#b314b8"}}))}}};n("2341");S.render=O;var T=S,z={name:"app",components:{HelloWorld:T}};z.render=i;var H=z;Object(c["c"])(H).mount("#app")},8502:function(t,e,n){},aec9:function(t,e,n){},cc5f:function(t,e,n){"use strict";n("8502")}});
//# sourceMappingURL=app.c794f28a.js.map